federal_republic_tax = {
	requires_approval = no
	should_notify_third_parties = no

	unlocking_technologies = {
		currency_standards
	}
	
	potential = {
		scope:target_country = {
			is_direct_subject_of = root
			OR = {
				is_subject_type = subject_type_federal_republic
				is_subject_type = subject_type_autonomous_federal_republic
			}
		}	
	}
	
	possible = {
		NOT = { has_war_with = scope:target_country }
		has_diplomatic_relevance = scope:target_country
		is_revolutionary = no
		in_default = no
	}
	
	pact = {	
		cost = 50
	
		is_two_sided_pact = no
		show_in_outliner = yes

		relations_progress_per_day = -2 # no like tax :c
		
		income_transfer = 0.20
		recipient_gets_income_transfer = yes
		income_transfer_based_on_recipient = yes

		is_about_to_auto_break = {
            scope:target_country.relations:root <= -17 # this: poor + 3
        }

		should_auto_break = {
			custom_tooltip = {
				text = DIPLO_ACTION_RELATIONS_POOR_OR_LESS

                # make sure to update is_about_to_auto_break when changing this:
				scope:target_country.relations:root <= relations_threshold:poor
			}
		}		
	
		should_invalidate = {
			OR = {
				has_war_with = scope:target_country				
				is_country_type = decentralized
				scope:target_country = { is_country_type = decentralized }
				in_default = yes
				NAND = {
					is_direct_subject_of = root
						OR = {
							is_subject_type = subject_type_federal_republic
							is_subject_type = subject_type_autonomous_federal_republic
						}
				}
			}
		}
	}
}

